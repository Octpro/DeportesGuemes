/**
 * Cart Mobile Simple Fix - Solución específica y no invasiva
 */

/* ===== DISABLE THE DISABLED CLASS FOR CART IN MOBILE ===== */
@media screen and (max-width: 900px) {
    /* Override the main.css .disabled { display: none } rule completely for cart */
    .carrito-resumen,
    .cart-actions-main,
    #carrito-resumen,
    #carrito-acciones-comprar,
    #carrito-acciones-vaciar {
        display: block !important;
        visibility: visible !important;
        opacity: 1 !important;
        position: relative !important;
        left: 0 !important;
        right: 0 !important;
        margin-left: 0 !important;
        margin-right: 0 !important;
    }
    
    .cart-actions-main,
    #carrito-acciones-comprar,
    #carrito-acciones-vaciar {
        display: flex !important;
    }
    
    /* Ensure main content area is properly positioned */
    main {
        position: relative !important;
        z-index: 10 !important;
        background: white !important;
        width: 100% !important;
        margin-left: 0 !important;
    }
    
    /* Fix any sidebar interference */
    aside[role="complementary"] {
        z-index: 5 !important;
    }
}

/* ===== MOBILE CART FIXES - SPECIFIC AND MINIMAL ===== */

@media screen and (max-width: 900px) {
    
    /* Fix cart container layout */
    .contenedor-carrito {
        display: flex;
        flex-direction: column;
        gap: 1rem;
        padding: 1rem;
    }
    
    /* Ensure cart summary is visible and properly positioned */
    .carrito-resumen {
        position: static;
        order: 2;
        width: 100%;
        margin: 0;
    }
    
    /* Fix cart products order */
    .carrito-productos-modern {
        order: 1;
        width: 100%;
    }
    
    /* Ensure action buttons are visible */
    .cart-actions-main {
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
        width: 100%;
        padding: 1rem 0;
    }
    
    /* Make buttons full width and visible */
    #carrito-acciones-comprar,
    #carrito-acciones-vaciar {
        display: flex !important;
        width: 100%;
        justify-content: center;
        align-items: center;
        gap: 0.5rem;
        padding: 1rem;
        border-radius: 8px;
        font-weight: 500;
        text-decoration: none;
        border: none;
        cursor: pointer;
        transition: all 0.2s ease;
    }
    
    /* WhatsApp button styling */
    #carrito-acciones-comprar {
        background-color: #25d366;
        color: white;
    }
    
    #carrito-acciones-comprar:hover {
        background-color: #128c7e;
    }
    
    /* Clear cart button styling */
    #carrito-acciones-vaciar {
        background-color: #dc3545;
        color: white;
    }
    
    #carrito-acciones-vaciar:hover {
        background-color: #c82333;
    }
    
    /* Fix summary card */
    .resumen-card {
        background: white;
        border: 1px solid #e9ecef;
        border-radius: 8px;
        padding: 1rem;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    /* Ensure summary title is visible */
    .resumen-title {
        color: #333;
        font-size: 1.1rem;
        margin-bottom: 1rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }
    
    /* Fix summary details */
    .resumen-details {
        margin-bottom: 1rem;
    }
    
    .resumen-line {
        display: flex;
        justify-content: space-between;
        margin-bottom: 0.5rem;
        color: #333;
    }
    
    .total-line {
        font-weight: bold;
        font-size: 1.1rem;
        border-top: 1px solid #e9ecef;
        padding-top: 0.5rem;
        margin-top: 0.5rem;
    }
    
    /* Fix cart product styling */
    .carrito-producto {
        background: white;
        border: 1px solid #e9ecef;
        border-radius: 8px;
        padding: 1rem;
        margin-bottom: 1rem;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    /* Remove any problematic backgrounds */
    .wrapper {
        background: #f8f9fa;
    }
    
    main {
        background: #f8f9fa;
        padding-top: 80px;
    }
}

/* ===== SPECIFIC FIX FOR VERY SMALL SCREENS ===== */
@media screen and (max-width: 500px) {
    /* Force everything to be visible on very small screens */
    .carrito-resumen,
    .cart-actions-main,
    #carrito-resumen,
    #carrito-acciones-comprar,
    #carrito-acciones-vaciar {
        display: block !important;
        visibility: visible !important;
        opacity: 1 !important;
        position: relative !important;
        z-index: 999 !important;
        width: 100% !important;
        max-width: 100% !important;
        box-sizing: border-box !important;
    }
    
    .cart-actions-main,
    #carrito-acciones-comprar,
    #carrito-acciones-vaciar {
        display: flex !important;
    }
    
    /* Ensure proper spacing and full width */
    .contenedor-carrito {
        padding: 0.5rem !important;
        gap: 1rem !important;
        width: 100% !important;
        max-width: 100% !important;
        box-sizing: border-box !important;
    }
    
    /* Fix cart summary card */
    .resumen-card {
        width: 100% !important;
        max-width: 100% !important;
        padding: 0.75rem !important;
        box-sizing: border-box !important;
        font-size: 0.9rem !important;
    }
    
    /* Fix summary title */
    .resumen-title {
        font-size: 1rem !important;
        margin-bottom: 0.75rem !important;
    }
    
    /* Fix buttons text and size */
    #carrito-acciones-comprar,
    #carrito-acciones-vaciar {
        font-size: 0.85rem !important;
        padding: 0.75rem 0.5rem !important;
        text-align: center !important;
        white-space: nowrap !important;
        overflow: hidden !important;
        text-overflow: ellipsis !important;
    }
    
    /* Make sure buttons are at the bottom */
    .cart-actions-main {
        order: 999 !important;
        margin-top: 1rem !important;
        padding: 0.75rem 0 !important;
        background: white !important;
        border-top: 1px solid #e9ecef !important;
        gap: 0.5rem !important;
    }
    
    /* Fix text wrapping */
    .resumen-line {
        font-size: 0.85rem !important;
        line-height: 1.3 !important;
    }
    
    .total-line {
        font-size: 0.9rem !important;
        font-weight: bold !important;
    }
}

/* ===== EXTRA SMALL SCREENS (VERY NARROW) ===== */
@media screen and (max-width: 300px) {
    /* Even more compact for very narrow screens */
    .resumen-card {
        padding: 0.5rem !important;
        font-size: 0.8rem !important;
    }
    
    .resumen-title {
        font-size: 0.9rem !important;
    }
    
    #carrito-acciones-comprar,
    #carrito-acciones-vaciar {
        font-size: 0.75rem !important;
        padding: 0.6rem 0.3rem !important;
    }
    
    .resumen-line {
        font-size: 0.75rem !important;
    }
    
    /* Stack buttons vertically with smaller gap */
    .cart-actions-main {
        gap: 0.3rem !important;
        padding: 0.5rem 0 !important;
    }
}

/* ===== FORCE VISIBILITY FOR CRITICAL ELEMENTS ===== */
@media screen and (max-width: 900px) {
    
    /* Override disabled class for cart elements */
    .carrito-resumen.disabled,
    .cart-actions-main.disabled,
    #carrito-acciones-comprar.disabled,
    #carrito-acciones-vaciar.disabled {
        display: flex !important;
        visibility: visible !important;
        opacity: 1 !important;
    }
    
    /* Force cart summary to be visible even with disabled class */
    .carrito-resumen {
        display: block !important;
        visibility: visible !important;
        opacity: 1 !important;
    }
    
    /* Force action buttons to be visible */
    .cart-actions-main {
        display: flex !important;
        visibility: visible !important;
        opacity: 1 !important;
    }
    
    #carrito-acciones-comprar,
    #carrito-acciones-vaciar {
        display: flex !important;
        visibility: visible !important;
        opacity: 1 !important;
    }
    
    /* Ensure proper stacking order */
    .carrito-productos-modern {
        z-index: 1;
    }
    
    .carrito-resumen {
        z-index: 2;
    }
    
    .cart-actions-main {
        z-index: 3;
    }
}

/* ===== OVERRIDE DISABLED CLASS FOR CART ELEMENTS ===== */
@media screen and (max-width: 900px) {
    /* Specifically override the main.css .disabled rule for cart elements */
    .carrito-resumen.disabled,
    .carrito-resumen {
        display: block !important;
        visibility: visible !important;
        opacity: 1 !important;
    }
    
    .cart-actions-main.disabled,
    .cart-actions-main {
        display: flex !important;
        visibility: visible !important;
        opacity: 1 !important;
    }
    
    .carrito-productos-modern.disabled {
        display: block !important;
    }
    
    /* Force all cart summary elements to be visible */
    #carrito-resumen,
    #carrito-resumen.disabled {
        display: block !important;
        visibility: visible !important;
        opacity: 1 !important;
    }
    
    /* Force all action buttons to be visible */
    .cart-actions-main,
    .cart-actions-main.disabled,
    #carrito-acciones-comprar,
    #carrito-acciones-comprar.disabled,
    #carrito-acciones-vaciar,
    #carrito-acciones-vaciar.disabled {
        display: flex !important;
        visibility: visible !important;
        opacity: 1 !important;
    }
}