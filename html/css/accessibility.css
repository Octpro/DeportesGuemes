/* ===================== */
/* 🔍 ACCESSIBILITY STYLES */
/* ===================== */

/* Skip Navigation Links */
.skip-nav {
    position: absolute;
    top: -40px;
    left: 6px;
    background: var(--clr-main);
    color: var(--clr-white);
    padding: 8px;
    text-decoration: none;
    border-radius: var(--border-radius-md);
    font-weight: var(--font-weight-semibold);
    z-index: var(--z-tooltip);
    transition: top var(--transition-fast);
}

.skip-nav:focus {
    top: 6px;
}

/* Screen Reader Only Content */
.sr-only {
    position: absolute !important;
    width: 1px !important;
    height: 1px !important;
    padding: 0 !important;
    margin: -1px !important;
    overflow: hidden !important;
    clip: rect(0, 0, 0, 0) !important;
    white-space: nowrap !important;
    border: 0 !important;
}

.sr-only-focusable:focus,
.sr-only-focusable:active {
    position: static !important;
    width: auto !important;
    height: auto !important;
    padding: inherit !important;
    margin: inherit !important;
    overflow: visible !important;
    clip: auto !important;
    white-space: inherit !important;
}

/* ===================== */
/* 🎯 FOCUS INDICATORS */
/* ===================== */

/* High contrast focus indicators that meet WCAG AA standards */
*:focus {
    outline: 2px solid var(--clr-main);
    outline-offset: 2px;
}

/* Custom focus styles for interactive elements */
button:focus,
input:focus,
select:focus,
textarea:focus,
a:focus,
[tabindex]:focus {
    outline: 2px solid var(--clr-main);
    outline-offset: 2px;
    box-shadow: 0 0 0 4px rgba(18, 145, 218, 0.2);
}

/* Focus styles for buttons */
.boton-menu:focus,
.btn-primary:focus,
.btn-secondary:focus {
    outline: 2px solid var(--clr-white);
    outline-offset: 2px;
    box-shadow: 0 0 0 4px rgba(255, 255, 255, 0.3);
}

/* Focus styles for form elements */
.filter-input:focus,
.filter-select:focus,
.search-input:focus,
.price-input:focus {
    border-color: var(--clr-main);
    box-shadow: 0 0 0 3px rgba(18, 145, 218, 0.2);
}

/* Focus styles for filter chips */
.filter-chip:focus {
    outline: 2px solid var(--clr-main);
    outline-offset: 1px;
    box-shadow: 0 0 0 3px rgba(18, 145, 218, 0.2);
}

/* ===================== */
/* 🎨 HIGH CONTRAST MODE */
/* ===================== */

@media (prefers-contrast: high) {
    :root {
        --clr-main: #0066cc;
        --clr-main-light: #3399ff;
        --clr-main-dark: #004499;
        --clr-text-primary: #000000;
        --clr-text-secondary: #333333;
        --clr-border: #666666;
        --clr-bg-primary: #ffffff;
        --clr-bg-secondary: #f0f0f0;
    }
    
    /* Stronger borders in high contrast mode */
    .product-card,
    .filter-panel,
    .cart-item {
        border: 2px solid var(--clr-border);
    }
    
    /* More prominent buttons */
    .btn-primary,
    .btn-secondary {
        border: 2px solid currentColor;
        font-weight: var(--font-weight-bold);
    }
}

/* ===================== */
/* 🌙 REDUCED MOTION */
/* ===================== */

@media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
    }
}

/* ===================== */
/* 📱 TOUCH ACCESSIBILITY */
/* ===================== */

/* Minimum touch target size (44px) for all interactive elements */
button,
input,
select,
textarea,
a,
[role="button"],
[tabindex] {
    min-height: 44px;
    min-width: 44px;
}

/* Exception for small icons that are part of larger touch targets */
.icon-small {
    min-height: auto;
    min-width: auto;
}

/* Ensure adequate spacing between touch targets */
.touch-target-group > * + * {
    margin-left: var(--spacing-sm);
}

/* ===================== */
/* 🔤 TEXT ACCESSIBILITY */
/* ===================== */

/* Ensure sufficient color contrast ratios */
.text-muted {
    color: #6c757d; /* 4.5:1 contrast ratio on white background */
}

.text-secondary {
    color: #495057; /* 7:1 contrast ratio on white background */
}

/* Error text with sufficient contrast */
.text-error {
    color: #dc3545; /* 4.5:1 contrast ratio on white background */
}

.text-success {
    color: #198754; /* 4.5:1 contrast ratio on white background */
}

/* ===================== */
/* 🎯 ARIA LIVE REGIONS */
/* ===================== */

.live-region {
    position: absolute;
    left: -10000px;
    width: 1px;
    height: 1px;
    overflow: hidden;
}

/* Status messages */
.status-message {
    padding: var(--spacing-md);
    border-radius: var(--border-radius-md);
    margin: var(--spacing-sm) 0;
}

.status-message.success {
    background-color: #d1edff;
    border: 1px solid #0066cc;
    color: #004499;
}

.status-message.error {
    background-color: #f8d7da;
    border: 1px solid #dc3545;
    color: #721c24;
}

.status-message.warning {
    background-color: #fff3cd;
    border: 1px solid #ffc107;
    color: #856404;
}

/* ===================== */
/* 🎛️ FORM ACCESSIBILITY */
/* ===================== */

/* Required field indicators */
.required::after {
    content: " *";
    color: #dc3545;
    font-weight: var(--font-weight-bold);
}

/* Form validation styles */
.form-field {
    margin-bottom: var(--spacing-md);
}

.form-label {
    display: block;
    margin-bottom: var(--spacing-xs);
    font-weight: var(--font-weight-medium);
    color: var(--clr-text-primary);
}

.form-input {
    width: 100%;
    padding: var(--spacing-sm) var(--spacing-md);
    border: 1px solid var(--clr-border);
    border-radius: var(--border-radius-md);
    font-size: var(--font-size-base);
    line-height: var(--line-height-normal);
}

.form-input:invalid {
    border-color: #dc3545;
    box-shadow: 0 0 0 2px rgba(220, 53, 69, 0.2);
}

.form-input:valid {
    border-color: #198754;
}

.form-error {
    display: block;
    margin-top: var(--spacing-xs);
    font-size: var(--font-size-sm);
    color: #dc3545;
}

.form-help {
    display: block;
    margin-top: var(--spacing-xs);
    font-size: var(--font-size-sm);
    color: var(--clr-text-secondary);
}

/* ===================== */
/* 🎪 MODAL ACCESSIBILITY */
/* ===================== */

.modal-backdrop {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5);
    z-index: var(--z-modal-backdrop);
}

.modal {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background-color: var(--clr-bg-primary);
    border-radius: var(--border-radius-lg);
    box-shadow: var(--shadow-xl);
    z-index: var(--z-modal);
    max-width: 90vw;
    max-height: 90vh;
    overflow-y: auto;
}

.modal-header {
    padding: var(--spacing-lg);
    border-bottom: 1px solid var(--clr-border);
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.modal-title {
    margin: 0;
    font-size: var(--font-size-xl);
    font-weight: var(--font-weight-semibold);
}

.modal-close {
    background: none;
    border: none;
    font-size: var(--font-size-xl);
    cursor: pointer;
    padding: var(--spacing-sm);
    border-radius: var(--border-radius-md);
}

.modal-body {
    padding: var(--spacing-lg);
}

.modal-footer {
    padding: var(--spacing-lg);
    border-top: 1px solid var(--clr-border);
    display: flex;
    justify-content: flex-end;
    gap: var(--spacing-md);
}

/* ===================== */
/* 🎯 KEYBOARD NAVIGATION */
/* ===================== */

/* Visible focus for keyboard users */
.keyboard-user *:focus {
    outline: 2px solid var(--clr-main);
    outline-offset: 2px;
}

/* Hide focus for mouse users */
.mouse-user *:focus {
    outline: none;
}

/* Tab navigation improvements */
[tabindex="-1"]:focus {
    outline: none;
}

/* Skip to content functionality */
.skip-to-content {
    position: absolute;
    top: -40px;
    left: 6px;
    background: var(--clr-main);
    color: var(--clr-white);
    padding: 8px;
    text-decoration: none;
    z-index: var(--z-tooltip);
}

.skip-to-content:focus {
    top: 6px;
}

/* ===================== */
/* 🎨 VISUAL INDICATORS */
/* ===================== */

/* Loading states */
.loading {
    position: relative;
    color: transparent;
}

.loading::after {
    content: "";
    position: absolute;
    top: 50%;
    left: 50%;
    width: 20px;
    height: 20px;
    margin: -10px 0 0 -10px;
    border: 2px solid var(--clr-border);
    border-top-color: var(--clr-main);
    border-radius: 50%;
    animation: spin 1s linear infinite;
}

@keyframes spin {
    to {
        transform: rotate(360deg);
    }
}

/* Disabled states */
[disabled],
.disabled {
    opacity: 0.6;
    cursor: not-allowed;
    pointer-events: none;
}

/* Error states */
.has-error {
    border-color: #dc3545 !important;
    box-shadow: 0 0 0 2px rgba(220, 53, 69, 0.2) !important;
}

/* Success states */
.has-success {
    border-color: #198754 !important;
    box-shadow: 0 0 0 2px rgba(25, 135, 84, 0.2) !important;
}

/* ===================== */
/* 📱 RESPONSIVE ACCESSIBILITY */
/* ===================== */

@media (max-width: 767px) {
    /* Larger touch targets on mobile */
    button,
    input,
    select,
    textarea,
    a,
    [role="button"] {
        min-height: 48px;
        min-width: 48px;
    }
    
    /* Larger text for better readability */
    .modal-title {
        font-size: var(--font-size-lg);
    }
    
    /* More spacing between interactive elements */
    .touch-target-group > * + * {
        margin-left: var(--spacing-md);
    }
}

/* ===================== */
/* 🎨 IMPROVED COLOR CONTRAST - WCAG AA COMPLIANT */
/* ===================== */

/* Update text colors for better contrast */
:root {
    /* WCAG AA compliant text colors */
    --clr-text-primary: #212529; /* 16:1 contrast ratio on white */
    --clr-text-secondary: #495057; /* 7:1 contrast ratio on white */
    --clr-text-muted: #6c757d; /* 4.5:1 contrast ratio on white */
    --clr-text-light: #ffffff;
    
    /* Status colors with improved contrast - all meet WCAG AA standards */
    --clr-error: #c82333; /* 4.5:1 contrast ratio on white */
    --clr-success: #155724; /* 4.5:1 contrast ratio on white */
    --clr-warning: #856404; /* 4.5:1 contrast ratio on white */
    --clr-info: #004085; /* 4.5:1 contrast ratio on white */
    
    /* Enhanced contrast for interactive elements */
    --clr-link: #0056b3; /* 4.5:1 contrast ratio on white */
    --clr-link-hover: #003d82; /* 7:1 contrast ratio on white */
    
    /* Button colors with proper contrast */
    --clr-btn-primary-bg: #0056b3; /* 4.5:1 contrast with white text */
    --clr-btn-primary-text: #ffffff;
    --clr-btn-secondary-bg: #6c757d; /* 4.5:1 contrast with white text */
    --clr-btn-secondary-text: #ffffff;
    
    /* Form element colors */
    --clr-input-border: #495057; /* 7:1 contrast ratio */
    --clr-input-focus: #0056b3; /* 4.5:1 contrast ratio */
    --clr-input-error: #c82333; /* 4.5:1 contrast ratio */
    --clr-input-success: #155724; /* 4.5:1 contrast ratio */
}

/* Override colors throughout the application for better accessibility */
.text-info,
.alert-info,
.badge-info,
.status-info {
    color: var(--clr-info) !important;
}

.text-error,
.alert-error,
.badge-error,
.status-error {
    color: var(--clr-error) !important;
}

.text-success,
.alert-success,
.badge-success,
.status-success {
    color: var(--clr-success) !important;
}

.text-warning,
.alert-warning,
.badge-warning,
.status-warning {
    color: var(--clr-warning) !important;
}

/* Ensure links meet contrast requirements */
a:not(.btn):not(.boton-menu) {
    color: var(--clr-link) !important;
}

a:not(.btn):not(.boton-menu):hover,
a:not(.btn):not(.boton-menu):focus {
    color: var(--clr-link-hover) !important;
}

/* Button contrast improvements */
.btn-primary,
.boton-menu.active,
.producto-consultar {
    background-color: var(--clr-btn-primary-bg) !important;
    color: var(--clr-btn-primary-text) !important;
    border-color: var(--clr-btn-primary-bg) !important;
}

.btn-secondary {
    background-color: var(--clr-btn-secondary-bg) !important;
    color: var(--clr-btn-secondary-text) !important;
    border-color: var(--clr-btn-secondary-bg) !important;
}

/* Form element contrast improvements */
.form-input,
.filter-input,
.filter-select,
input,
select,
textarea {
    border-color: var(--clr-input-border) !important;
    color: var(--clr-text-primary) !important;
}

.form-input:focus,
.filter-input:focus,
.filter-select:focus,
input:focus,
select:focus,
textarea:focus {
    border-color: var(--clr-input-focus) !important;
}

/* Ensure sufficient contrast for placeholder text */
::placeholder {
    color: var(--clr-text-muted) !important;
    opacity: 1 !important;
}

/* Price text contrast */
.producto-precio {
    color: var(--clr-text-primary) !important;
    font-weight: var(--font-weight-bold) !important;
}

/* Muted text with sufficient contrast */
.text-muted,
.producto-talles,
small {
    color: var(--clr-text-muted) !important;
}

/* ===================== */
/* 🎨 PRODUCT BADGE ACCESSIBILITY */
/* ===================== */

/* Ensure product badges have sufficient contrast and are accessible */
.producto-badge {
    position: absolute;
    top: 8px;
    right: 8px;
    padding: 4px 8px;
    border-radius: var(--border-radius-sm);
    font-size: 0.75rem;
    font-weight: var(--font-weight-bold);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    z-index: 2;
    box-shadow: var(--shadow-sm);
    border: 1px solid transparent;
}

.producto-badge.sin-stock {
    background: var(--clr-error) !important;
    color: white !important;
    border-color: darkred;
}

.producto-badge.sin-stock::before {
    content: "✗ ";
    font-weight: bold;
}

.producto-badge.oferta {
    background: var(--clr-warning) !important;
    color: white !important;
    border-color: #b8860b;
}

.producto-badge.oferta::before {
    content: "% ";
    font-weight: bold;
}

.producto-badge.nuevo {
    background: var(--clr-success) !important;
    color: white !important;
    border-color: darkgreen;
}

.producto-badge.nuevo::before {
    content: "★ ";
    font-weight: bold;
}

/* ===================== */
/* 🎯 ENHANCED PRODUCT AVAILABILITY */
/* ===================== */

.producto-disponibilidad {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.875rem;
    font-weight: var(--font-weight-medium);
    margin: 0.5rem 0;
    padding: 0.25rem 0.5rem;
    border-radius: var(--border-radius-sm);
}

.producto-disponibilidad.disponible {
    color: var(--clr-success) !important;
    background: rgba(21, 87, 36, 0.1);
    border: 1px solid var(--clr-success);
}

.producto-disponibilidad.disponible::before {
    content: "✓";
    font-weight: bold;
    color: var(--clr-success);
}

.producto-disponibilidad.sin-stock {
    color: var(--clr-error) !important;
    background: rgba(200, 35, 51, 0.1);
    border: 1px solid var(--clr-error);
}

.producto-disponibilidad.sin-stock::before {
    content: "✗";
    font-weight: bold;
    color: var(--clr-error);
}

.producto-disponibilidad.stock-bajo {
    color: var(--clr-warning) !important;
    background: rgba(133, 100, 4, 0.1);
    border: 1px solid var(--clr-warning);
}

.producto-disponibilidad.stock-bajo::before {
    content: "⚠";
    font-weight: bold;
    color: var(--clr-warning);
}

/* ===================== */
/* 🔤 ALTERNATIVE TEXT SUPPORT */
/* ===================== */

/* Ensure all images have proper alt text styling */
img:not([alt]),
img[alt=""] {
    border: 2px dashed #dc3545;
    position: relative;
}

img:not([alt])::after,
img[alt=""]::after {
    content: "Imagen sin texto alternativo";
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: rgba(220, 53, 69, 0.9);
    color: white;
    padding: 4px 8px;
    font-size: 12px;
    border-radius: 4px;
    white-space: nowrap;
    z-index: 10;
}

/* Style for decorative images */
img[alt=""],
img[role="presentation"] {
    border: none;
}

img[alt=""]::after,
img[role="presentation"]::after {
    display: none;
}

/* ===================== */
/* 🎯 VISUAL INDICATORS NOT RELYING ON COLOR */
/* ===================== */

/* Status indicators with icons and patterns */
.status-indicator {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.25rem 0.5rem;
    border-radius: var(--border-radius-md);
    font-weight: var(--font-weight-medium);
}

.status-success {
    background-color: #d1edff;
    border: 2px solid var(--clr-success);
    color: var(--clr-success);
}

.status-success::before {
    content: "✓";
    font-weight: bold;
    font-size: 1.1em;
}

.status-error {
    background-color: #f8d7da;
    border: 2px solid var(--clr-error);
    color: var(--clr-error);
}

.status-error::before {
    content: "✗";
    font-weight: bold;
    font-size: 1.1em;
}

.status-warning {
    background-color: #fff3cd;
    border: 2px solid var(--clr-warning);
    color: #856404;
}

.status-warning::before {
    content: "⚠";
    font-weight: bold;
    font-size: 1.1em;
}

.status-info {
    background-color: #d1ecf1;
    border: 2px solid var(--clr-info-dark);
    color: var(--clr-info-dark);
}

.status-info::before {
    content: "ℹ";
    font-weight: bold;
    font-size: 1.1em;
}

/* Product availability indicators */
.producto-disponibilidad {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.875rem;
    font-weight: var(--font-weight-medium);
    margin-top: 0.5rem;
}

.disponible {
    color: var(--clr-success);
}

.disponible::before {
    content: "●";
    font-size: 1.2em;
    margin-right: 0.25rem;
}

.sin-stock {
    color: var(--clr-error);
}

.sin-stock::before {
    content: "●";
    font-size: 1.2em;
    margin-right: 0.25rem;
}

.stock-bajo {
    color: var(--clr-warning);
}

.stock-bajo::before {
    content: "●";
    font-size: 1.2em;
    margin-right: 0.25rem;
}

/* Form validation indicators */
.form-field.has-error .form-input {
    border-color: var(--clr-error);
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="%23dc3545" viewBox="0 0 16 16"><path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/><path d="M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995z"/></svg>');
    background-repeat: no-repeat;
    background-position: right 0.75rem center;
    background-size: 16px;
    padding-right: 2.5rem;
}

.form-field.has-success .form-input {
    border-color: var(--clr-success);
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="%23198754" viewBox="0 0 16 16"><path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/><path d="M10.97 4.97a.235.235 0 0 0-.02.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.061L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-1.071-1.05z"/></svg>');
    background-repeat: no-repeat;
    background-position: right 0.75rem center;
    background-size: 16px;
    padding-right: 2.5rem;
}

/* Required field indicators */
.required-field::after {
    content: " *";
    color: var(--clr-error);
    font-weight: var(--font-weight-bold);
    font-size: 1.1em;
}

/* Button state indicators */
.btn-loading {
    position: relative;
    color: transparent !important;
    pointer-events: none;
}

.btn-loading::after {
    content: "";
    position: absolute;
    top: 50%;
    left: 50%;
    width: 16px;
    height: 16px;
    margin: -8px 0 0 -8px;
    border: 2px solid transparent;
    border-top: 2px solid currentColor;
    border-radius: 50%;
    animation: spin 1s linear infinite;
}

/* Filter active state indicators */
.filter-chip.active {
    background-color: var(--clr-main);
    color: var(--clr-white);
    border: 2px solid var(--clr-main);
    position: relative;
}

.filter-chip.active::after {
    content: "✓";
    position: absolute;
    top: -8px;
    right: -8px;
    background: var(--clr-success);
    color: white;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 12px;
    font-weight: bold;
    border: 2px solid white;
}

/* Cart quantity indicators */
.cart-quantity {
    position: relative;
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
}

.cart-quantity::before {
    content: "Cantidad:";
    font-size: 0.875rem;
    color: var(--clr-text-secondary);
}

/* Price change indicators */
.precio-rebajado {
    position: relative;
}

.precio-rebajado::before {
    content: "OFERTA";
    position: absolute;
    top: -20px;
    left: 0;
    background: var(--clr-error);
    color: white;
    padding: 2px 6px;
    font-size: 0.7rem;
    font-weight: bold;
    border-radius: 3px;
    letter-spacing: 0.5px;
}

/* ===================== */
/* 🌗 HIGH CONTRAST MODE ENHANCEMENTS */
/* ===================== */

@media (prefers-contrast: high) {
    :root {
        /* Enhanced contrast colors */
        --clr-main: #0056b3;
        --clr-main-light: #007bff;
        --clr-main-dark: #003d82;
        --clr-text-primary: #000000;
        --clr-text-secondary: #1a1a1a;
        --clr-text-muted: #333333;
        --clr-border: #000000;
        --clr-bg-primary: #ffffff;
        --clr-bg-secondary: #f0f0f0;
        
        /* High contrast status colors */
        --clr-error: #cc0000;
        --clr-success: #006600;
        --clr-warning: #cc6600;
        --clr-info-dark: #004466;
    }
    
    /* Stronger borders and outlines */
    .producto,
    .filter-panel,
    .cart-item,
    .form-input,
    .btn-primary,
    .btn-secondary,
    .filter-chip,
    .boton-menu {
        border: 2px solid var(--clr-border) !important;
    }
    
    /* Enhanced focus indicators */
    *:focus {
        outline: 3px solid #000000 !important;
        outline-offset: 2px !important;
        box-shadow: 0 0 0 5px #ffff00 !important;
    }
    
    /* Remove subtle shadows and gradients */
    .producto,
    .btn-primary,
    .btn-secondary,
    .filter-chip,
    .boton-menu {
        box-shadow: none !important;
        background-image: none !important;
    }
    
    /* Ensure text is always readable */
    .producto-titulo,
    .producto-precio,
    .form-label,
    .btn-primary,
    .btn-secondary,
    .filter-chip,
    .boton-menu {
        font-weight: var(--font-weight-bold) !important;
    }
    
    /* High contrast status indicators */
    .status-success,
    .text-success,
    .disponible {
        background-color: #ffffff !important;
        color: #006600 !important;
        border: 3px solid #006600 !important;
    }
    
    .status-error,
    .text-error,
    .sin-stock {
        background-color: #ffffff !important;
        color: #cc0000 !important;
        border: 3px solid #cc0000 !important;
    }
    
    .status-warning,
    .text-warning,
    .stock-bajo {
        background-color: #ffffff !important;
        color: #cc6600 !important;
        border: 3px solid #cc6600 !important;
    }
    
    /* Enhanced product cards in high contrast */
    .producto {
        background: #ffffff !important;
        border: 3px solid #000000 !important;
    }
    
    .producto.sin-stock {
        background: #f0f0f0 !important;
        border: 3px dashed #cc0000 !important;
    }
    
    /* Enhanced buttons in high contrast */
    .btn-primary,
    .producto-consultar {
        background: var(--clr-main) !important;
        color: #ffffff !important;
        border: 2px solid var(--clr-main) !important;
    }
    
    .btn-secondary {
        background: #ffffff !important;
        color: #000000 !important;
        border: 3px solid #000000 !important;
    }
}

/* Manual high contrast mode class */
.high-contrast-mode {
    /* Apply same styles as media query */
}

.high-contrast-mode .producto,
.high-contrast-mode .filter-panel,
.high-contrast-mode .cart-item,
.high-contrast-mode .form-input,
.high-contrast-mode .btn-primary,
.high-contrast-mode .btn-secondary,
.high-contrast-mode .filter-chip,
.high-contrast-mode .boton-menu {
    border: 2px solid #000000 !important;
    box-shadow: none !important;
    background-image: none !important;
}

.high-contrast-mode .status-success,
.high-contrast-mode .text-success,
.high-contrast-mode .disponible {
    background-color: #ffffff !important;
    color: #006600 !important;
    border: 3px solid #006600 !important;
}

.high-contrast-mode .status-error,
.high-contrast-mode .text-error,
.high-contrast-mode .sin-stock {
    background-color: #ffffff !important;
    color: #cc0000 !important;
    border: 3px solid #cc0000 !important;
}

.high-contrast-mode .status-warning,
.high-contrast-mode .text-warning,
.high-contrast-mode .stock-bajo {
    background-color: #ffffff !important;
    color: #cc6600 !important;
    border: 3px solid #cc6600 !important;
}

/* ===================== */
/* 🎨 PATTERN-BASED INDICATORS */
/* ===================== */

/* Use patterns for colorblind users */
.pattern-success {
    background-image: repeating-linear-gradient(
        45deg,
        transparent,
        transparent 2px,
        rgba(25, 135, 84, 0.1) 2px,
        rgba(25, 135, 84, 0.1) 4px
    );
}

.pattern-error {
    background-image: repeating-linear-gradient(
        45deg,
        transparent,
        transparent 2px,
        rgba(220, 53, 69, 0.1) 2px,
        rgba(220, 53, 69, 0.1) 4px
    );
}

.pattern-warning {
    background-image: repeating-linear-gradient(
        45deg,
        transparent,
        transparent 2px,
        rgba(253, 126, 20, 0.1) 2px,
        rgba(253, 126, 20, 0.1) 4px
    );
}

/* ===================== */
/* 📱 MOBILE ACCESSIBILITY IMPROVEMENTS */
/* ===================== */

@media (max-width: 767px) {
    /* Larger touch targets */
    .btn-primary,
    .btn-secondary,
    .filter-chip,
    .boton-menu {
        min-height: 48px !important;
        min-width: 48px !important;
        padding: 12px 16px !important;
    }
    
    /* Improved spacing for touch */
    .filter-chips {
        gap: 12px !important;
    }
    
    /* Enhanced focus indicators for mobile */
    *:focus {
        outline: 3px solid var(--clr-main) !important;
        outline-offset: 3px !important;
    }
    
    /* Larger text for better readability */
    .producto-titulo {
        font-size: 1.2rem !important;
        line-height: 1.4 !important;
    }
    
    .producto-precio {
        font-size: 1.4rem !important;
    }
    
    /* Better contrast for mobile */
    .text-muted {
        color: var(--clr-text-secondary) !important;
    }
}

/* ===================== */
/* 🔍 ZOOM AND MAGNIFICATION SUPPORT */
/* ===================== */

/* Ensure layout works at 200% zoom */
@media (min-resolution: 2dppx) {
    .producto-img {
        image-rendering: -webkit-optimize-contrast;
        image-rendering: crisp-edges;
    }
    
    /* Ensure text remains readable */
    .producto-titulo,
    .producto-precio {
        text-rendering: optimizeLegibility;
    }
}

/* Support for Windows high DPI */
@media (-webkit-min-device-pixel-ratio: 2) {
    .icon,
    .bi {
        image-rendering: -webkit-optimize-contrast;
    }
}

/* ===================== */
/* 🎯 IMPROVED LINK ACCESSIBILITY */
/* ===================== */

/* Ensure links are distinguishable */
a:not(.btn):not(.boton-menu) {
    color: var(--clr-main);
    text-decoration: underline;
    text-decoration-thickness: 2px;
    text-underline-offset: 2px;
}

a:not(.btn):not(.boton-menu):hover {
    color: var(--clr-main-dark);
    text-decoration-thickness: 3px;
}

a:not(.btn):not(.boton-menu):focus {
    outline: 2px solid var(--clr-main);
    outline-offset: 2px;
    background-color: rgba(18, 145, 218, 0.1);
    border-radius: 2px;
}

/* ===================== */
/* 🎨 COLOR BLIND FRIENDLY INDICATORS */
/* ===================== */

/* Use shapes and symbols for different states */
.stock-indicator {
    display: inline-flex;
    align-items: center;
    gap: 0.25rem;
    font-size: 0.875rem;
    font-weight: var(--font-weight-medium);
}

.stock-alto::before {
    content: "▲";
    color: var(--clr-success);
}

.stock-medio::before {
    content: "■";
    color: var(--clr-warning);
}

.stock-bajo::before {
    content: "▼";
    color: var(--clr-error);
}

/* Price indicators */
.precio-subio::after {
    content: " ↗";
    color: var(--clr-error);
    font-weight: bold;
}

.precio-bajo::after {
    content: " ↘";
    color: var(--clr-success);
    font-weight: bold;
}

/* Category indicators */
.categoria-indumentaria::before {
    content: "👕 ";
}

.categoria-accesorios::before {
    content: "🎒 ";
}

.categoria-calzado::before {
    content: "👟 ";
}

/* ===================== */
/* 🔊 SOUND ALTERNATIVES */
/* ===================== */

/* Visual feedback for actions that might have sound */
.action-feedback {
    position: fixed;
    top: 20px;
    right: 20px;
    padding: 12px 16px;
    border-radius: var(--border-radius-md);
    font-weight: var(--font-weight-medium);
    z-index: var(--z-tooltip);
    animation: slideInFromRight 0.3s ease-out;
}

.action-feedback.success {
    background: var(--clr-success);
    color: white;
}

.action-feedback.error {
    background: var(--clr-error);
    color: white;
}

@keyframes slideInFromRight {
    from {
        transform: translateX(100%);
        opacity: 0;
    }
    to {
        transform: translateX(0);
        opacity: 1;
    }
}

/* ===================== */
/* 🎪 ANIMATION PREFERENCES */
/* ===================== */

/* Respect user's motion preferences */
@media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
    }
    
    /* Keep essential animations but make them instant */
    .loading::after {
        animation: none !important;
    }
    
    /* Replace animations with immediate state changes */
    .producto:hover {
        transform: none !important;
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15) !important;
    }
}
/* =
==================== */
/* 🎨 ENHANCED VISUAL INDICATORS */
/* ===================== */

/* Price indicators */
.price-indicator {
    position: absolute;
    top: -8px;
    right: -8px;
    background: var(--clr-error);
    color: white;
    padding: 4px 8px;
    font-size: 0.7rem;
    font-weight: var(--font-weight-bold);
    border-radius: var(--border-radius-sm);
    letter-spacing: 0.5px;
    z-index: 2;
    box-shadow: var(--shadow-sm);
}

.sale-indicator {
    background: linear-gradient(135deg, #ff6b6b, #ee5a52);
    animation: pulse 2s infinite;
}

@keyframes pulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.05); }
}

/* Category indicators */
.category-indicator {
    position: absolute;
    bottom: 8px;
    left: 8px;
    width: 24px;
    height: 24px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 12px;
    background: rgba(255, 255, 255, 0.9);
    border: 2px solid var(--clr-main);
    z-index: 2;
}

.categoria-indumentaria .category-indicator::before {
    content: "👕";
}

.categoria-accesorios .category-indicator::before {
    content: "🎒";
}

.categoria-calzado .category-indicator::before {
    content: "👟";
}

.categoria-general .category-indicator::before {
    content: "🏃";
}

/* Loading indicators */
.loading-indicator {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: rgba(255, 255, 255, 0.95);
    padding: 16px;
    border-radius: var(--border-radius-md);
    box-shadow: var(--shadow-lg);
    z-index: 10;
}

.loading-indicator::after {
    content: "";
    display: block;
    width: 20px;
    height: 20px;
    margin: 8px auto 0;
    border: 2px solid var(--clr-border);
    border-top-color: var(--clr-main);
    border-radius: 50%;
    animation: spin 1s linear infinite;
}

/* Validation indicators */
.validation-indicator {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-top: var(--spacing-xs);
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-medium);
}

.validation-indicator.status-success {
    color: var(--clr-success);
}

.validation-indicator.status-success::before {
    content: "✓";
    font-weight: bold;
}

.validation-indicator.status-error {
    color: var(--clr-error);
}

.validation-indicator.status-error::before {
    content: "✗";
    font-weight: bold;
}

/* Quantity indicators */
.quantity-indicator {
    font-size: var(--font-size-sm);
    color: var(--clr-text-secondary);
    font-weight: var(--font-weight-medium);
    margin-left: var(--spacing-sm);
}

.quantity-indicator::before {
    content: "📦 ";
    margin-right: 0.25rem;
}

/* Visual status indicators */
.visual-status-indicator {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    font-size: 12px;
    font-weight: bold;
    margin-left: var(--spacing-xs);
}

.visual-status-indicator.status-success {
    background: var(--clr-success);
    color: white;
}

.visual-status-indicator.status-error {
    background: var(--clr-error);
    color: white;
}

.visual-status-indicator.status-warning {
    background: var(--clr-warning);
    color: white;
}

.visual-status-indicator.status-info {
    background: var(--clr-info);
    color: white;
}

/* Image placeholder styles */
.image-placeholder {
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--clr-bg-secondary);
    border: 2px dashed var(--clr-border);
    border-radius: var(--border-radius-md);
    color: var(--clr-text-muted);
    font-size: var(--font-size-sm);
    text-align: center;
    padding: var(--spacing-md);
    position: relative;
}

.image-placeholder::before {
    content: "🖼️";
    font-size: 2rem;
    display: block;
    margin-bottom: var(--spacing-sm);
}

/* Enhanced product status indicators */
.producto .stock-indicator {
    position: absolute;
    top: 8px;
    left: 8px;
    padding: 4px 8px;
    border-radius: var(--border-radius-sm);
    font-size: 0.75rem;
    font-weight: var(--font-weight-bold);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    z-index: 2;
    box-shadow: var(--shadow-sm);
}

.producto .stock-indicator.stock-alto {
    background: var(--clr-success);
    color: white;
}

.producto .stock-indicator.stock-alto::before {
    content: "✓ ";
}

.producto .stock-indicator.stock-bajo {
    background: var(--clr-warning);
    color: white;
}

.producto .stock-indicator.stock-bajo::before {
    content: "⚠ ";
}

.producto .stock-indicator.sin-stock {
    background: var(--clr-error);
    color: white;
}

.producto .stock-indicator.sin-stock::before {
    content: "✗ ";
}

/* ===================== */
/* 🎯 ENHANCED FOCUS MANAGEMENT */
/* ===================== */

/* Focus trap for modals */
.modal-open {
    overflow: hidden;
}

.modal-open .modal {
    overflow-x: hidden;
    overflow-y: auto;
}

/* Focus within improvements */
.focus-within-highlight:focus-within {
    outline: 2px solid var(--clr-main);
    outline-offset: 2px;
    border-radius: var(--border-radius-md);
}

/* Skip link enhancements */
.skip-nav:focus {
    clip: auto;
    height: auto;
    margin: 0;
    overflow: visible;
    position: absolute;
    width: auto;
    z-index: var(--z-tooltip);
}

/* ===================== */
/* 🔤 TEXT SCALING SUPPORT */
/* ===================== */

/* Support for 200% text scaling */
@media (min-resolution: 2dppx) {
    .producto-titulo,
    .producto-precio,
    .form-label,
    .btn-primary,
    .btn-secondary {
        line-height: var(--line-height-relaxed);
    }
    
    /* Ensure touch targets remain adequate */
    button,
    input,
    select,
    textarea,
    a,
    [role="button"] {
        min-height: 48px;
        min-width: 48px;
    }
}

/* ===================== */
/* 🎨 COLORBLIND-FRIENDLY PATTERNS */
/* ===================== */

/* Diagonal stripes for success */
.pattern-success {
    background-image: repeating-linear-gradient(
        45deg,
        transparent,
        transparent 3px,
        rgba(21, 87, 36, 0.1) 3px,
        rgba(21, 87, 36, 0.1) 6px
    );
}

/* Dots pattern for errors */
.pattern-error {
    background-image: radial-gradient(
        circle at 2px 2px,
        rgba(200, 35, 51, 0.2) 1px,
        transparent 1px
    );
    background-size: 8px 8px;
}

/* Diagonal stripes for warnings */
.pattern-warning {
    background-image: repeating-linear-gradient(
        -45deg,
        transparent,
        transparent 3px,
        rgba(133, 100, 4, 0.1) 3px,
        rgba(133, 100, 4, 0.1) 6px
    );
}

/* Cross-hatch pattern for info */
.pattern-info {
    background-image: 
        repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(0, 64, 133, 0.1) 2px, rgba(0, 64, 133, 0.1) 4px),
        repeating-linear-gradient(90deg, transparent, transparent 2px, rgba(0, 64, 133, 0.1) 2px, rgba(0, 64, 133, 0.1) 4px);
}

/* ===================== */
/* 🎪 ANIMATION ACCESSIBILITY */
/* ===================== */

/* Respect reduced motion preferences */
@media (prefers-reduced-motion: reduce) {
    .sale-indicator {
        animation: none !important;
    }
    
    .loading-indicator::after {
        animation: none !important;
        border: 2px solid var(--clr-main) !important;
    }
    
    /* Replace animations with immediate state changes */
    .producto:hover {
        transform: none !important;
    }
    
    /* Keep essential loading indicators but make them static */
    .loading::after {
        animation: none !important;
        content: "⏳" !important;
        position: static !important;
        display: inline !important;
        margin-left: 0.5rem !important;
    }
}

/* ===================== */
/* 🎯 IMPROVED LINK ACCESSIBILITY */
/* ===================== */

/* Ensure all links are clearly identifiable */
a:not(.btn):not(.boton-menu):not(.logo) {
    text-decoration: underline;
    text-decoration-thickness: 2px;
    text-underline-offset: 2px;
    transition: all var(--transition-fast);
}

a:not(.btn):not(.boton-menu):not(.logo):hover {
    text-decoration-thickness: 3px;
    text-shadow: 0 0 1px currentColor;
}

a:not(.btn):not(.boton-menu):not(.logo):focus {
    background-color: rgba(0, 86, 179, 0.1);
    border-radius: 2px;
    padding: 2px 4px;
    margin: -2px -4px;
}

/* External link indicators */
a[href^="http"]:not([href*="deportesguemes"]):not(.btn):not(.boton-menu)::after {
    content: " ↗";
    font-size: 0.8em;
    opacity: 0.7;
}

/* ===================== */
/* 🎨 ENHANCED ERROR STATES */
/* ===================== */

/* Form field error states */
.form-field.has-error {
    position: relative;
}

.form-field.has-error::before {
    content: "";
    position: absolute;
    left: -4px;
    top: 0;
    bottom: 0;
    width: 4px;
    background: var(--clr-error);
    border-radius: 2px;
}

/* Success states */
.form-field.has-success {
    position: relative;
}

.form-field.has-success::before {
    content: "";
    position: absolute;
    left: -4px;
    top: 0;
    bottom: 0;
    width: 4px;
    background: var(--clr-success);
    border-radius: 2px;
}

/* ===================== */
/* 🎯 IMPROVED BUTTON ACCESSIBILITY */
/* ===================== */

/* Ensure all buttons have adequate contrast and size */
button,
.btn-primary,
.btn-secondary,
[role="button"] {
    position: relative;
    overflow: hidden;
}

/* Add ripple effect for better feedback (respecting motion preferences) */
@media (prefers-reduced-motion: no-preference) {
    button:active::after,
    .btn-primary:active::after,
    .btn-secondary:active::after {
        content: "";
        position: absolute;
        top: 50%;
        left: 50%;
        width: 0;
        height: 0;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.5);
        transform: translate(-50%, -50%);
        animation: ripple 0.6s ease-out;
    }
}

@keyframes ripple {
    to {
        width: 100px;
        height: 100px;
        opacity: 0;
    }
}

/* ===================== */
/* 🎨 PRINT ACCESSIBILITY */
/* ===================== */

@media print {
    /* Ensure good contrast in print */
    * {
        background: white !important;
        color: black !important;
        box-shadow: none !important;
    }
    
    /* Show URLs for links */
    a[href]:after {
        content: " (" attr(href) ")";
        font-size: 0.8em;
    }
    
    /* Hide decorative elements */
    .skip-nav,
    .loading-indicator,
    .visual-status-indicator {
        display: none !important;
    }
    
    /* Ensure images have alt text visible */
    img[alt]:after {
        content: " [" attr(alt) "]";
        font-size: 0.8em;
        font-style: italic;
    }
}

/* ===================== */
/* 🎯 FINAL ACCESSIBILITY ENHANCEMENTS */
/* ===================== */

/* Ensure all interactive elements are keyboard accessible */
[tabindex="0"]:focus,
[tabindex="-1"]:focus {
    outline: 2px solid var(--clr-main);
    outline-offset: 2px;
}

/* Improve readability of small text */
small,
.text-small {
    font-size: max(0.875rem, 14px);
    line-height: var(--line-height-normal);
}

/* Ensure adequate spacing for touch targets */
.touch-friendly {
    padding: max(12px, 0.75rem);
    margin: max(4px, 0.25rem);
}

/* High contrast mode improvements for Windows */
@media (-ms-high-contrast: active) {
    .producto,
    .btn-primary,
    .btn-secondary,
    .form-input {
        border: 2px solid;
    }
    
    .skip-nav:focus {
        background: ButtonText;
        color: ButtonFace;
    }
}

/* Forced colors mode support */
@media (forced-colors: active) {
    .producto {
        border: 1px solid;
    }
    
    .btn-primary,
    .btn-secondary {
        border: 1px solid ButtonText;
    }
    
    .status-success,
    .status-error,
    .status-warning,
    .status-info {
        border: 1px solid;
        background: Canvas;
        color: CanvasText;
    }
}